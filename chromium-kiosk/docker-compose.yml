services:
  kiosk:
    # Default (dev): build locally from repo
    build: .
    image: alpine-chromium-kiosk:dev
    container_name: alpine-chromium-kiosk
    env_file:
      - kiosk.env
    ports:
      - "5900:5900"   # VNC (Xvnc)
      - "6080:6080"   # noVNC (optional, standalone only)
    shm_size: "512m"
    restart: "no"
    volumes:
      - kiosk-home:/home/app
    profiles: ["dev"]

  kiosk-hub:
    # Hub: pull from Docker Hub (no build)
    image: davis-boudreau/alpine-chromium-kiosk:latest
    container_name: alpine-chromium-kiosk
    env_file:
      - kiosk.env
    ports:
      - "5900:5900"   # VNC (Xvnc)
      - "6080:6080"   # noVNC (optional, standalone only)
    shm_size: "512m"
    restart: "no"
    volumes:
      - kiosk-home:/home/app
    profiles: ["hub"]

volumes:
  kiosk-home:
